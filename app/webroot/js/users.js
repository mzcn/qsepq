$(document).ready(function(){    $('#dataTables-users').DataTable({        responsive: true    });    //name lose focus    $name = $('#username');    $name_error = $('#name_error');    $name.bind('focusout',function(){        if(($.trim($name.val())) === '') {            validate_input_error($name_error, '请输入用户名称！');            return false;        } else {            check_name_exist();        }    });    //user pass lose focus    $pass = $('#password');    $pass_confirm = $('#confirm_password');    $pass_error = $('#userpass_error');    $pass.bind('focusout',function() {        if($('#id').val() != '' && $pass_confirm.val() == '' && $pass.val() == '') {            return false;        }        var patter_val = /^[-_0-9a-zA-Z]+$/;        if($pass.val() == '') {            validate_input_error($pass_error, '请输入密码！');            return false;        } else if ($pass.val().length < 2 || !patter_val.test($pass.val())) {            validate_input_error($pass_error, '密码不合法，只允许字母、数字、以及中划线-、下划线_');            return false;        } else {            validate_input_success($pass_error);        }    });    //password confirm lose focus    $pass_confirm_error = $('#confirmpass_error');    $pass_confirm.bind('focusout',function(){        if($('#action').val() == 'edit' && $pass_confirm.val() == '' && $pass.val() == '') {            return false;        }        if($pass.val() == '') {            return false;        }        if($pass_confirm.val() == '') {            validate_input_error($pass_confirm_error, '请输入密码！');            return false;        } else if($pass_confirm.val().length < 2) {            validate_input_error($pass_confirm_error, '密码不合法，只允许字母、数字、以及中划线-、下划线_');            return false;        } else if(($pass.val() != $pass_confirm.val())) {            validate_input_error($pass_confirm_error, '确认密码与密码不一致！');            return false;        } else {            validate_input_success($pass_confirm_error);        }    });    //email lose focus    $email = $('#email');    $email_error = $('#email_error');    $email.bind('focusout',function() {        if($.trim($email.val()) == '') {            validate_input_error($email_error, '请输入电子邮件！');            return false;        } else {            if(!isValidMail($email.val())) {                validate_input_error($email_error, '电子邮件不合法！');                return false;            } else {                validate_input_success($email_error);            }        }    });	//add info submit	$('#btn_save').click(function(){        $name.triggerHandler('focusout');				if($('.onError').length > 0) {			//the first error text get focus			if($('span.onError').siblings('input').get(0) != undefined) {				$('span.onError').siblings('input').get(0).focus();			} else {				$('span.onError').siblings('select').get(0).focus();			}			return false;		}	});		$('#btn_reset').click(function(){        if($('#id').val() == '') {            window.location.href = "/users/add";        } else {            window.location.href = "/users/edit?id="+$('#id').val();        }	});});//check name exist or notfunction check_name_exist() {	var parameters = '/users/checkExist?name=' + encodeURIComponent($.trim($name.val())) + '&id=' + $('#id').val();	check_exist($name_error,parameters,'该用户名称已存在！');}